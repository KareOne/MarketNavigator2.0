# Linkedin API Remote Worker Deployment
# Deploy this alongside the Linkedin API to connect to the main orchestrator

services:
  # ==========================================================================
  # Worker Agent (connects to main server orchestrator)
  # ==========================================================================
  worker_agent:
    build:
      context: ./worker_agent
      dockerfile: Dockerfile
    container_name: remote-linkedin-worker
    # No sleep needed - agent waits for local API to be ready before connecting
    command: python agent.py
    ports:
      - "9097:9099" # Status proxy port (internal use only)
    environment:
      - ORCHESTRATOR_URL=${ORCHESTRATOR_URL:-ws://89.42.199.54:8010/ws/worker}
      - WORKER_TOKEN=${WORKER_TOKEN}
      - API_TYPE=linkedin
      - WORKER_NAME=${WORKER_NAME:-linkedin-remote-1}
      - LOCAL_API_URL=http://172.17.0.1:5001
      - HEARTBEAT_INTERVAL=10
      - RECONNECT_DELAY=5
      - LOG_LEVEL=INFO
    restart: unless-stopped
